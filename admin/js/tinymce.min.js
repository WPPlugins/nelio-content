var NCTinyMce=NCTinyMce||{};NCTinyMce.shareSelection=function(e){var n=e.selection.getContent({format:"text"});if(n=NelioContent.helpers.trim(n),0!==n.length){var t=new NelioContent.models.SocialMessage;t.setPost(NCTinyMce.timelineView.collection.post),t.set("text",n+" {permalink}"),t.set("profileId",NelioContent.profiles.at(0).get("id"));var i=new NelioContent.views.SocialMessageEditor({model:t});Backbone.listenToOnce(i,"nc:add:messages",function(e){NCTinyMce.timelineView.collection.add(e)}),i.render()}},function(){tinymce.PluginManager.add("nelio_content",function(e,n){var t=NelioContent.i18n.tinymce.shareSelectionTitle;NelioContent.helpers.isSubscribed()||(t+=" "+NelioContent.i18n.subscribersOnly),e.addButton("nc_share_selection",{title:t,icon:"nc-share-selection",disabled:!0,onclick:function(){NCTinyMce.shareSelection(e)}}),NelioContent.helpers.isSubscribed()&&e.onNodeChange.add(function(e,n){var t=e.selection.getContent({format:"text"});t=NelioContent.helpers.trim(t),n.setDisabled("nc_share_selection",0===t.length||0===NelioContent.profiles.length)})})}();